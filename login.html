<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - HEALTH-IA</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>

    <div class="div_login" id="div_login">

        <div id="login_fields">
            <h1 class="h1_contato">Login</h1>

            <label for="input_emailLG">Email</label>
            <input id="input_emailLG" type="email">

            <br><br>

            <label for="input_senhaLG">Senha</label>
            <input id="input_senhaLG" type="password">

            <br><br>

            <button id="btn_cadastrarLG" class="btn2">Criar nova conta</button>
            <button id="btn_entrarLG" class="btn2">Entrar</button>
        </div>

        <!-- CADASTRO -->
        <div class="div_cadastrar ocultar" id="div_cadastrar">
            <h1 class="h1_contato">Cadastro</h1>

            <label for="input_nome_lg">Nome completo</label>
            <input id="input_nome_lg" type="text">

            <br><br>

            <label for="input_senha_cadastro">Senha</label>
            <input id="input_senha_cadastro" type="password">

            <br><br>

            <label for="input_email_lg">Email</label>
            <input id="input_email_lg" type="email">

            <br><br>

            <button id="btn_salvar_cadastro" class="btn2">Salvar</button>

            <p class="d_p" id="resultado_cadastro">Status aparecerá aqui</p>
        </div>
    </div>

</body>

<script>
    // ABRIR TELA DE CADASTRO
    btn_cadastrarLG.onclick = () => {
        login_fields.style.display = "none";
        div_cadastrar.classList.remove("ocultar");
    };

    // ENTRAR
    btn_entrarLG.onclick = () => {
        const email = input_emailLG.value.trim();
        const senha = input_senhaLG.value.trim();

        if (!email || !senha) {
            alert("Preencha email e senha.");
            return;
        }

        alert("Login realizado! (Simulação)");
    };

    // SALVAR CADASTRO
    btn_salvar_cadastro.onclick = async () => {
        const nome = input_nome_lg.value;
        const email = input_email_lg.value;
        const senha = input_senha_cadastro.value;

        const resposta = await fetch("http://localhost:3000/cadastro_login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ nome_compl: nome, email, senha })
        });

        const dados = await resposta.json();
        resultado_cadastro.innerText = dados.resposta || "Salvo!";
    };
</script>

</html>
